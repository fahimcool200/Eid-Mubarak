<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Eid Mubarak! Personal Greeting</title>

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Eid Mubarak! ✨ Create & Share Your Personalized Video Greeting!" />
    <meta property="og:description" content="Send a unique Eid Mubarak greeting with a stunning video, background music, and fireworks! Enter your name and share the joy with friends and family." />
    <meta property="og:image" content="https://i.postimg.cc/2yfNhdyr/6609266-38283.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:url" content="https://eid-mubarak-xi.vercel.app/" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Eid Mubarak Greetings" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Eid Mubarak! ✨ Create & Share Your Personalized Video Greeting!" />
    <meta name="twitter:description" content="Send a unique Eid Mubarak greeting with a stunning video, background music, and fireworks!" />
    <meta name="twitter:image" content="https://i.postimg.cc/2yfNhdyr/6609266-38283.jpg" />

    <link rel="icon" href="https://i.postimg.cc/2yfNhdyr/6609266-38283.jpg" type="image/jpeg">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@300;400;500;600&family=Lobster&display=swap'); /* Lobster font added */

        :root {
            --primary-color: #e91e63;
            --secondary-color: #ffc107;
            --accent-color: #00bcd4;
            --background-start: #1c0021;
            --background-end: #4a003e;
            --text-color: #f8f8f8;
            --button-bg-start: var(--primary-color);
            --button-bg-end: #d81b60;
            --button-border-color: var(--secondary-color);
            --button-hover-bg-start: #d81b60;
            --button-hover-bg-end: #c2185b;
            --button-text-hover: #ffffff;
            --copied-success-bg: #28a745;
            --secondary-color-rgb: 255, 193, 7;
            --input-bg-color: rgba(255, 255, 255, 0.08);
            --input-border-color: var(--button-border-color);
            --input-focus-border-color: var(--accent-color);
            --input-placeholder-color: rgba(245, 245, 245, 0.65);
            --wish-message-bg: rgba(255, 255, 255, 0.08); /* Wish message background */
            --wish-message-border: var(--accent-color);
            --wish-message-text-shadow: 0 1px 3px rgba(0,0,0,0.5);
        }

        html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, var(--background-start), var(--background-end)); color: var(--text-color); text-align: center; }
        .main-wrapper { width: 100%; height: 100%; overflow-y: auto; overflow-x: hidden; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; padding: 20px 10px; box-sizing: border-box; }
        .container { max-width: 600px; width: 100%; padding: 25px; background: rgba(20, 0, 30, 0.7); border-radius: 25px; box-shadow: 0 15px 60px rgba(0, 0, 0, 0.7); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.18); margin-bottom: 20px; }
        .eid-video-container { width: 100%; aspect-ratio: 16 / 9; background-color: #000; margin-left: auto; margin-right: auto; margin-bottom: 20px; border-radius: 18px; overflow: hidden; position: relative; box-shadow: 0 0 15px rgba(var(--secondary-color-rgb), 0.25); }
        .eid-video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; display: block; border-radius: 18px; }
        .audio-controls { margin-bottom: 20px; }
        .control-button { padding: 10px 18px; margin: 8px 5px; border: none; border-radius: 25px; background: linear-gradient(45deg, var(--accent-color), #0097a7 ); color: var(--text-color); font-size: 0.85em; font-weight: 500; cursor: pointer; transition: background 0.2s ease, box-shadow 0.2s ease, transform 0.1s ease-out; outline: none; position: relative; display: inline-flex; align-items: center; justify-content: center; text-decoration: none; min-width: 130px; box-shadow: 0 2px 8px rgba(0,0,0,0.2), 0 0 2px var(--accent-color); }
        .control-button:hover { background: linear-gradient(45deg, #0097a7, #00796b ); box-shadow: 0 3px 12px rgba(0,0,0,0.3), 0 0 6px var(--accent-color); }
        .control-button:active { transform: scale(0.97); }
        .control-icon { width: 18px; height: 18px; vertical-align: middle; margin-right: 6px; fill: currentColor; }
        .greeting-text { font-family: 'Pacifico', cursive; font-size: 2.3em; margin-bottom: 20px; background-image: linear-gradient(45deg, var(--secondary-color), var(--primary-color)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 0 10px rgba(255, 255, 255, 0.4), 0 0 20px var(--secondary-color); animation: fadeInText 1.5s ease-out; line-height: 1.3; }
        @keyframes fadeInText { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        input[type="text"] { width: calc(100% - 48px); padding: 16px 24px; margin-bottom: 20px; border: 1.5px solid var(--input-border-color); border-radius: 30px; background-color: var(--input-bg-color); color: var(--text-color); font-size: 1em; font-family: 'Poppins', sans-serif; outline: none; transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.15); }
        input[type="text"]::placeholder { color: var(--input-placeholder-color); font-style: italic; }
        input[type="text"]:focus { border-color: var(--input-focus-border-color); background-color: rgba(255, 255, 255, 0.12); box-shadow: 0 0 12px var(--input-focus-border-color), 0 0 20px rgba(var(--accent-color-rgb, 0,188,212), 0.3); }
        #generateWish { font-weight: 600; padding: 16px 30px; }
        button, .share-button { padding: 15px 28px; margin: 8px 5px; border: none; border-radius: 30px; background: linear-gradient(45deg, var(--button-bg-start), var(--button-bg-end)); color: var(--text-color); font-size: 0.95em; font-weight: 500; cursor: pointer; transition: background 0.2s ease, box-shadow 0.2s ease, color 0.2s ease, transform 0.1s ease-out; outline: none; position: relative; display: inline-flex; align-items: center; justify-content: center; text-decoration: none; min-width: 170px; box-shadow: 0 4px 12px rgba(0,0,0,0.25), 0 0 4px var(--button-border-color); }
        button:active, .share-button:active { transform: scale(0.98); }
        button:hover, .share-button:hover { background: linear-gradient(45deg, var(--button-hover-bg-start), var(--button-hover-bg-end)); color: var(--button-text-hover); box-shadow: 0 5px 18px rgba(0,0,0,0.35), 0 0 10px var(--accent-color); }
        
        /* উন্নত কাস্টম উইশ মেসেজ স্টাইল */
        #customWishMessageContainer {
            margin-top: 25px;
            padding: 20px;
            background: var(--wish-message-bg);
            border-radius: 15px;
            border-left: 6px solid var(--wish-message-border);
            border-top: 1px solid rgba(255,255,255,0.1);
            border-right: 1px solid rgba(255,255,255,0.1);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            min-height: 30px;
            line-height: 1.6; /* উন্নত পঠনযোগ্যতা */
            word-wrap: break-word;
            color: #fff; /* উজ্জ্বল টেক্সট */
            font-family: 'Lobster', cursive; /* আকর্ষণীয় ফন্ট */
            font-size: 1.35em; /* সাইজ বাড়ানো হয়েছে */
            text-shadow: var(--wish-message-text-shadow);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s ease-in-out;
        }
        #customWishMessageContainer:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(var(--accent-color-rgb,0,188,212),0.3), 0 5px 15px rgba(0,0,0,0.4);
        }
        #customWishMessageContainer p {
            margin: 0;
            padding: 0;
        }
        #customWishMessageContainer p:empty { display: none; }

        .share-buttons-container { margin-top: 20px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
        .share-icon, .copy-icon { width: 20px; height: 20px; vertical-align: middle; margin-right: 8px; fill: currentColor; }
        #copyNotification { position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); background-color: var(--copied-success-bg); color: white; padding: 12px 22px; border-radius: 8px; z-index: 1000; opacity: 0; transition: opacity 0.5s ease-in-out, transform 0.3s ease-out; font-size: 0.9em; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        #copyNotification.show { opacity: 1; transform: translateX(-50%) translateY(-10px); }
        footer { margin-top: 25px; font-size: 0.8em; opacity: 0.75; }
        #fireworksCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 999; pointer-events: none; display: none; }
        #fireworksMessage { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); font-family: 'Pacifico', cursive; font-size: 3em; color: var(--secondary-color); text-shadow: 0 0 5px var(--primary-color), 0 0 10px var(--primary-color), 0 0 15px #fff, 0 0 25px var(--secondary-color); opacity: 0; transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out; z-index: 1000; pointer-events: none; display: none; }
        #fireworksMessage.show { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }

        /* CSS for Ad Slots */
        .ad-slot { margin-top: 20px; margin-bottom: 20px; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        .ad-slot-leaderboard { max-width: 728px; min-height: 90px; width: 100%; margin-left: auto; margin-right: auto; }
        .ad-slot-banner { max-width: 468px; min-height: 60px; width: 100%; margin-left: auto; margin-right: auto; }
        .ad-slot-mobile-banner { max-width: 320px; min-height: 50px; width: 100%; margin-left: auto; margin-right: auto; }
        .ad-slot-medium-rectangle { max-width: 300px; min-height: 250px; width: 100%; margin-left: auto; margin-right: auto; }
        .ad-slot-small-skyscraper { max-width: 160px; min-height: 300px; width: 100%; margin-left: auto; margin-right: auto; }


        /* Media Queries */
        @media (max-width: 768px) { .ad-slot-leaderboard { max-width: 100%; } }
        @media (max-width: 600px) {
            .container { padding: 20px; }
            .greeting-text { font-size: 2em; }
            input[type="text"] { width: calc(100% - 40px); padding: 14px 20px; }
            button, .share-button { padding: 14px 20px; font-size: 0.9em; min-width: calc(50% - 15px); margin: 5px; } /* Adjusted for 2 buttons per row */
            #generateWish { padding: 14px 25px; width: calc(100% - 10px); }
            .control-button { padding: 9px 16px; font-size: 0.8em; min-width: 110px; }
            #customWishMessageContainer { font-size: 1.2em; padding: 15px; }
            #fireworksMessage { font-size: 2.5em; }
            .ad-slot-banner { max-width: 100%; }
        }
        @media (max-width: 480px) {
            .greeting-text { font-size: 1.7em; }
            /* Share buttons will stack due to min-width on general button style, or adjust min-width further */
            button, .share-button { font-size: 0.85em; padding: 12px 16px; min-width: calc(100% - 10px); margin: 5px auto; /* Stack buttons */ }
            #generateWish, .control-button { width: calc(100% - 10px); margin: 8px 5px;}
            .share-buttons-container { gap: 5px; }
            input[type="text"] { width: calc(100% - 36px); padding: 12px 18px; }
            #customWishMessageContainer { font-size: 1.1em; }
            #fireworksMessage { font-size: 2em; }
        }
        @media (max-width: 380px) {
            .greeting-text { font-size: 1.6em; }
            button, .share-button, .control-button, #generateWish { width: calc(100% - 10px); margin: 6px 5px; }
            input[type="text"] { width: calc(100% - 30px); padding: 12px 15px;}
            #customWishMessageContainer { font-size: 1.05em; padding: 12px; }
            #fireworksMessage { font-size: 1.8em; }
        }
    </style>
</head>
<body>
    <div class="main-wrapper">

        <!-- Ad Slot 1: 728x90 -->
        <div class="ad-slot ad-slot-leaderboard">
            <script type="text/javascript"> atOptions = { 'key' : '490fb1567684d6d65a607885aa44240c', 'format' : 'iframe', 'height' : 90, 'width' : 728, 'params' : {} }; </script>
            <script type="text/javascript" src="//www.highperformanceformat.com/490fb1567684d6d65a607885aa44240c/invoke.js"></script>
        </div>

        <!-- Ad Slot (New): 468x60 -->
        <div class="ad-slot ad-slot-banner">
            <script type="text/javascript"> atOptions = { 'key' : 'e988494647ea320c06a95078ffb62626', 'format' : 'iframe', 'height' : 60, 'width' : 468, 'params' : {} }; </script>
            <script type="text/javascript" src="//www.highperformanceformat.com/e988494647ea320c06a95078ffb62626/invoke.js"></script>
        </div>

        <div class="container">
            <div class="eid-video-container">
                <video class="eid-video" id="eidGreetingVideo" autoplay loop muted playsinline>
                    <source src="eid_video.mp4" type="video/mp4"> Your browser does not support the video tag.
                </video>
            </div>

            <audio id="eidBackgroundAudio" loop>
                <source src="eid_song.mp3" type="audio/mpeg"> Your browser does not support the audio element.
            </audio>

            <div class="audio-controls">
                <button class="control-button" id="audioMuteToggleButton">
                    <span id="audioIconContainer"></span>
                    <span id="audioTextContainer">Mute Sound</span>
                </button>
            </div>

            <p class="greeting-text">✨ Eid Mubarak! Joy, Peace & Blessings to All! ✨</p>

            <input type="text" id="userName" placeholder="Enter Your Name Here...">
            <button id="generateWish">🎉 Generate Eid Wish 🎉</button>

            <!-- Ad Slot 2 (Old): 320x50 -->
            <div class="ad-slot ad-slot-mobile-banner">
                <script type="text/javascript"> atOptions = { 'key' : '4cedcf05f030af507913aad8703ab1de', 'format' : 'iframe', 'height' : 50, 'width' : 320, 'params' : {} }; </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/4cedcf05f030af507913aad8703ab1de/invoke.js"></script>
            </div>

            <div id="customWishMessageContainer">
                <p id="customWishMessage"></p>
            </div>

            <!-- Ad Slot (New): 300x250 -->
            <div class="ad-slot ad-slot-medium-rectangle">
                <script type="text/javascript"> atOptions = { 'key' : '2cef79b5b52d6f94166b60f184cefd95', 'format' : 'iframe', 'height' : 250, 'width' : 300, 'params' : {} }; </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/2cef79b5b52d6f94166b60f184cefd95/invoke.js"></script>
            </div>

            <div class="share-buttons-container" id="shareContainer" style="display: none;">
                <button class="share-button" id="shareWhatsApp"><svg class="share-icon" viewBox="0 0 24 24"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.33 3.43 16.79L2 22L7.32 20.59C8.73 21.33 10.34 21.82 12.04 21.82C17.5 21.82 21.95 17.37 21.95 11.91C21.95 6.45 17.5 2 12.04 2ZM16.56 15.9C16.34 16.39 15.33 16.93 14.96 16.98C14.58 17.03 13.96 17.06 13.47 16.87C12.98 16.68 12.06 16.34 11 15.38C9.68 14.18 8.89 12.68 8.72 12.37C8.55 12.06 8.24 11.66 8.24 11.22C8.24 10.78 8.46 10.59 8.63 10.42C8.8 10.25 9.02 10.11 9.19 9.95C9.33 9.82 9.39 9.71 9.51 9.51C9.63 9.31 9.57 9.14 9.48 8.97C9.39 8.8 8.86 7.46 8.62 6.91C8.38 6.36 8.14 6.42 7.98 6.41C7.82 6.4 7.6 6.4 7.38 6.4C7.16 6.4 6.85 6.48 6.59 6.75C6.33 7.02 5.75 7.54 5.75 8.61C5.75 9.68 6.62 10.69 6.77 10.86C6.92 11.03 8.34 13.29 10.51 14.19C12.68 15.09 13.13 15.29 13.68 15.49C14.23 15.69 14.93 15.64 15.24 15.52C15.6 15.37 16.36 14.91 16.56 14.44C16.76 13.97 16.76 13.59 16.68 13.48C16.6 13.37 16.48 13.31 16.34 13.22C16.2 13.13 15.74 12.9 15.44 12.78C15.14 12.66 14.98 12.6 14.82 12.87C14.66 13.14 14.23 13.65 14.09 13.8C13.95 13.95 13.81 13.97 13.6 13.86C13.39 13.75 12.76 13.54 12.01 12.88C11.38 12.32 10.95 11.63 10.8 11.36C10.65 11.09 10.77 10.95 10.92 10.82C11.05 10.7 11.21 10.53 11.35 10.38C11.49 10.23 11.55 10.11 11.64 9.95C11.73 9.79 11.67 9.65 11.61 9.54C11.55 9.43 11.04 8.09 10.83 7.6C10.62 7.11 10.41 7.17 10.28 7.17C10.14 7.17 9.89 7.17 9.74 7.17H9.59C9.44 7.17 9.08 7.26 8.84 7.5C8.6 7.74 8.06 8.25 8.06 9.32C8.06 10.39 8.87 11.37 9.01 11.54C9.15 11.71 10.51 13.88 12.62 14.75C13.43 15.09 14.06 15.32 14.5 15.46C15.13 15.64 15.65 15.6 15.96 15.49C16.32 15.35 17.02 14.94 17.22 14.47C17.42 14 17.42 13.62 17.34 13.51C17.26 13.4 17.14 13.34 17 13.25C16.86 13.16 16.77 13.13 16.56 15.9Z"/></svg>WhatsApp</button>
                <button class="share-button" id="shareFacebook"><svg class="share-icon" viewBox="0 0 24 24"><path d="M12 2.04C6.48 2.04 2 6.52 2 12.06C2 17.06 5.66 21.21 10.44 21.98V14.96H7.9V12.06H10.44V9.84C10.44 7.34 11.93 5.96 14.22 5.96C15.31 5.96 16.25 6.04 16.5 6.08V8.54H15.19C13.95 8.54 13.56 9.24 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.98C18.34 21.21 22 17.06 22 12.06C22 6.52 17.52 2.04 12 2.04Z"/></svg>Facebook</button>
                <button class="share-button" id="shareTelegram"><svg class="share-icon" viewBox="0 0 24 24"><path d="M21.95,3.05a1.48,1.48,0,0,0-1.05-.44,2.36,2.36,0,0,0-.67.08L3.15,7.78a1.72,1.72,0,0,0-.5,3.28l4.06,1.26,1.9,5.93a1.18,1.18,0,0,0,1.13.81.94.94,0,0,0,.39-.08,1.07,1.07,0,0,0,.73-.72L14.14,5.28,10.9,15.1,18,8.41l-4.44,9.65,9.12-3.49a1.78,1.78,0,0,0,1.33-1.63A1.7,1.7,0,0,0,21.95,3.05Z"/></svg>Telegram</button>
                <button class="share-button" id="shareMessenger"><svg class="share-icon" viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 4.973 0 11.11c0 3.587 1.884 6.73 4.743 8.695V24l4.05-2.152c1.025.342 2.108.527 3.207.527 6.627 0 12-4.973 12-11.11S18.627 0 12 0zm1.14 15.223l-2.306-2.592-4.93 2.513L12.078 8.77l2.307 2.592 4.929-2.513-6.174 6.374z"/></svg>Messenger</button> <!-- মেসেঞ্জার বাটন -->
                <button class="share-button" id="copyLinkButton"><svg class="copy-icon" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>Copy Link</button>
            </div>

            <!-- Ad Slot (New): 160x300 -->
            <div class="ad-slot ad-slot-small-skyscraper">
                <script type="text/javascript"> atOptions = { 'key' : 'beb7fe63efc5087ec1533e0109f6dc59', 'format' : 'iframe', 'height' : 300, 'width' : 160, 'params' : {} }; </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/beb7fe63efc5087ec1533e0109f6dc59/invoke.js"></script>
            </div>
        </div>
        <div id="copyNotification">Link Copied!</div>
        <canvas id="fireworksCanvas"></canvas>
        <div id="fireworksMessage">Eid Mubarak!</div>
    </div>
    <footer>
        <p>© <span id="currentYear"></span> Eid Greetings. Crafted with ❤️.</p>
    </footer>

    <script>
        // ... (JavaScript variables - shareMessengerButton added) ...
        const shareMessengerButton = document.getElementById('shareMessenger'); // মেসেঞ্জার বাটন ভ্যারিয়েবল

        // ... (Rest of the JavaScript, including fireworks, audio, and other share functions) ...
        const userNameInput = document.getElementById('userName');
        const generateWishButton = document.getElementById('generateWish');
        const customWishMessageElement = document.getElementById('customWishMessage');
        const eidVideo = document.getElementById('eidGreetingVideo');
        const eidBackgroundAudio = document.getElementById('eidBackgroundAudio');
        const audioMuteToggleButton = document.getElementById('audioMuteToggleButton');
        const audioIconContainer = document.getElementById('audioIconContainer');
        const audioTextContainer = document.getElementById('audioTextContainer');
        const shareContainer = document.getElementById('shareContainer');
        const shareWhatsAppButton = document.getElementById('shareWhatsApp');
        const shareFacebookButton = document.getElementById('shareFacebook');
        const shareTelegramButton = document.getElementById('shareTelegram');
        // const shareMessengerButton = document.getElementById('shareMessenger'); // Already declared above
        const copyLinkButton = document.getElementById('copyLinkButton');
        const copyNotification = document.getElementById('copyNotification');
        const fireworksCanvas = document.getElementById('fireworksCanvas');
        const fireworksCtx = fireworksCanvas ? fireworksCanvas.getContext('2d') : null;
        const fireworksMessage = document.getElementById('fireworksMessage');
        let currentCustomWish = "";
        const pageUrl = window.location.href;
        const defaultShareText = "Eid Mubarak! ✨ Check out this awesome Eid Greeting I made!";
        const muteIconSVG = '<svg class="control-icon" viewBox="0 0 24 24"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/></svg>';
        const unmuteIconSVG = '<svg class="control-icon" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>';
        let fireworks = [], particles = [], fireworksAnimationId;
        function updateAudioMuteButton() { if (!eidBackgroundAudio || !audioMuteToggleButton) return; if (eidBackgroundAudio.muted) { audioIconContainer.innerHTML = unmuteIconSVG; audioTextContainer.textContent = "Unmute"; } else { audioIconContainer.innerHTML = muteIconSVG; audioTextContainer.textContent = "Mute"; } }
        function getShareMessageText() { return currentCustomWish || defaultShareText; }
        function getShareTitle() { return "Eid Mubarak Greeting by " + (userNameInput.value.trim() || "Me") + "!";}
        function setupFireworksCanvas() { if(fireworksCanvas) { fireworksCanvas.width = window.innerWidth; fireworksCanvas.height = window.innerHeight; }}
        function Firework(sx, sy, tx, ty) { this.x = sx; this.y = sy; this.sx = sx; this.sy = sy; this.tx = tx; this.ty = ty; this.distanceToTarget = Math.sqrt(Math.pow(tx - sx, 2) + Math.pow(ty - sy, 2)); this.distanceTraveled = 0; this.coordinates = []; this.coordinateCount = 5; while (this.coordinateCount--) { this.coordinates.push([this.x, this.y]); } this.angle = Math.atan2(ty - sy, tx - sx); this.speed = 3; this.acceleration = 1.04; this.brightness = Math.random() * 30 + 70; this.targetRadius = 1; this.lineWidth = Math.random() * 2 + 1; }
        Firework.prototype.update = function(index) { this.coordinates.pop(); this.coordinates.unshift([this.x, this.y]); this.speed *= this.acceleration; let vx = Math.cos(this.angle) * this.speed; let vy = Math.sin(this.angle) * this.speed; this.distanceTraveled = Math.sqrt(Math.pow(this.x - this.sx, 2) + Math.pow(this.y - this.sy, 2)); if (this.distanceTraveled >= this.distanceToTarget) { createParticles(this.tx, this.ty, this.brightness); fireworks.splice(index, 1); } else { this.x += vx; this.y += vy; } };
        Firework.prototype.draw = function() { if(!fireworksCtx) return; fireworksCtx.beginPath(); fireworksCtx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]); fireworksCtx.lineTo(this.x, this.y); fireworksCtx.lineWidth = this.lineWidth; fireworksCtx.strokeStyle = 'hsl(' + (Math.random() * 60 + 0) + ', 100%, ' + this.brightness + '%)'; fireworksCtx.stroke(); };
        function Particle(x, y, fireworkBrightness) { this.x = x; this.y = y; this.coordinates = []; this.coordinateCount = 8; while (this.coordinateCount--) { this.coordinates.push([this.x, this.y]); } this.angle = Math.random() * Math.PI * 2; this.speed = Math.random() * 12 + 2; this.friction = 0.96; this.gravity = 0.8; this.hue = Math.random() * 60 + 0; this.brightness = Math.random() * 30 + (fireworkBrightness - 20); this.alpha = 1; this.decay = Math.random() * 0.025 + 0.01; this.lineWidth = Math.random() * 1.5 + 0.5; }
        Particle.prototype.update = function(index) { this.coordinates.pop(); this.coordinates.unshift([this.x, this.y]); this.speed *= this.friction; this.x += Math.cos(this.angle) * this.speed; this.y += Math.sin(this.angle) * this.speed + this.gravity; this.alpha -= this.decay; if (this.alpha <= this.decay) { particles.splice(index, 1); } };
        Particle.prototype.draw = function() { if(!fireworksCtx) return; fireworksCtx.beginPath(); fireworksCtx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]); fireworksCtx.lineTo(this.x, this.y); fireworksCtx.lineWidth = this.lineWidth; fireworksCtx.strokeStyle = 'hsla(' + this.hue + ', 100%, ' + this.brightness + '%, ' + this.alpha + ')'; fireworksCtx.stroke(); };
        function createParticles(x, y, fireworkBrightness) { let particleCount = 50 + Math.floor(Math.random() * 30); while (particleCount--) { particles.push(new Particle(x, y, fireworkBrightness)); } }
        function loopFireworks() { if(!fireworksCtx || !fireworksCanvas) return; fireworksAnimationId = requestAnimationFrame(loopFireworks); fireworksCtx.globalCompositeOperation = 'destination-out'; fireworksCtx.fillStyle = 'rgba(0, 0, 0, 0.3)'; fireworksCtx.fillRect(0, 0, fireworksCanvas.width, fireworksCanvas.height); fireworksCtx.globalCompositeOperation = 'lighter'; for (let i = fireworks.length - 1; i >= 0; i--) { fireworks[i].draw(); fireworks[i].update(i); } for (let i = particles.length - 1; i >= 0; i--) { particles[i].draw(); particles[i].update(i); } }
        function triggerFireworks() { if (!fireworksCanvas || !fireworksCtx || !fireworksMessage) return; fireworksCanvas.style.display = 'block'; setupFireworksCanvas(); if (fireworksAnimationId) cancelAnimationFrame(fireworksAnimationId); fireworks = []; particles = []; let numFireworks = 6 + Math.floor(Math.random() * 4); for(let i = 0; i < numFireworks; i++) { let startX = fireworksCanvas.width * (0.15 + Math.random() * 0.7); let startY = fireworksCanvas.height; let targetX = Math.random() * (fireworksCanvas.width * 0.8) + (fireworksCanvas.width * 0.1); let targetY = Math.random() * (fireworksCanvas.height * 0.35) + (fireworksCanvas.height * 0.1); fireworks.push(new Firework(startX, startY, targetX, targetY)); } loopFireworks(); setTimeout(() => { fireworksMessage.style.display = 'block'; setTimeout(() => { fireworksMessage.classList.add('show'); }, 100); }, 1500); setTimeout(() => { fireworksMessage.classList.remove('show'); setTimeout(() => { fireworksMessage.style.display = 'none'; }, 500); fireworksCanvas.style.display = 'none'; if(fireworksAnimationId) cancelAnimationFrame(fireworksAnimationId); fireworks = []; particles = []; if (fireworksCtx) fireworksCtx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height); }, 7000); }
        window.addEventListener('resize', setupFireworksCanvas);
        window.addEventListener('load', () => { if (eidVideo) { eidVideo.muted = true; eidVideo.play().catch(e => console.warn("Video autoplay (muted) failed:", e)); } if (eidBackgroundAudio) { eidBackgroundAudio.muted = true; const audioPlayPromise = eidBackgroundAudio.play(); if (audioPlayPromise !== undefined) { audioPlayPromise.then(_ => { console.log("Audio initially played (muted)."); }).catch(error => { console.warn("Initial audio play (muted) prevented:", error);}).finally(() => updateAudioMuteButton()); } else { updateAudioMuteButton(); } eidBackgroundAudio.addEventListener('volumechange', updateAudioMuteButton); eidBackgroundAudio.addEventListener('play', updateAudioMuteButton); eidBackgroundAudio.addEventListener('pause', updateAudioMuteButton); } setupFireworksCanvas(); updateAudioMuteButton(); });
        if (audioMuteToggleButton) { audioMuteToggleButton.addEventListener('click', () => { if (!eidBackgroundAudio) return; eidBackgroundAudio.muted = !eidBackgroundAudio.muted; if (!eidBackgroundAudio.muted && eidBackgroundAudio.paused) { eidBackgroundAudio.play().catch(e => console.warn("Failed to play audio after user unmute:", e)).finally(() => updateAudioMuteButton()); } else { updateAudioMuteButton(); } }); }
        if (generateWishButton) { generateWishButton.addEventListener('click', () => { const name = userNameInput.value.trim(); currentCustomWish = name ? `Eid Mubarak from ${name}! 🎉 Wishing you a joyous and blessed Eid filled with happiness, peace, and prosperity!` : "Eid Mubarak! 🎉 Wishing you a joyous and blessed Eid filled with happiness, peace, and prosperity!"; if(customWishMessageElement) customWishMessageElement.innerHTML = currentCustomWish.replace(/\n/g, "<br>"); if (shareContainer) shareContainer.style.display = 'flex'; triggerFireworks(); if (eidBackgroundAudio && eidBackgroundAudio.muted) { eidBackgroundAudio.muted = false; if(eidBackgroundAudio.paused){ eidBackgroundAudio.play().catch(e => console.warn("Audio play on generate wish failed:", e)).finally(() => updateAudioMuteButton()); } else { updateAudioMuteButton(); } } else if (eidBackgroundAudio && !eidBackgroundAudio.muted && eidBackgroundAudio.paused){ eidBackgroundAudio.play().catch(e => console.warn("Audio play on generate wish failed:", e)).finally(() => updateAudioMuteButton()); } else { updateAudioMuteButton(); } }); }
        if (shareWhatsAppButton) { shareWhatsAppButton.addEventListener('click', () => { const messageToShare = `${getShareMessageText()}\n\nCreate yours here: ${pageUrl}`; const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(messageToShare)}`; window.open(whatsappUrl, '_blank'); }); }
        if (shareFacebookButton) { shareFacebookButton.addEventListener('click', () => { const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(pageUrl)}"e=${encodeURIComponent(getShareMessageText())}`; window.open(facebookUrl, '_blank'); }); }
        if (shareTelegramButton) { shareTelegramButton.addEventListener('click', () => { const text = `${getShareTitle()}\n${getShareMessageText()}\n\nCreate your own greeting:`; const telegramUrl = `https://t.me/share/url?url=${encodeURIComponent(pageUrl)}&text=${encodeURIComponent(text)}`; window.open(telegramUrl, '_blank'); }); }

        // মেসেঞ্জার শেয়ার ফাংশন
        if (shareMessengerButton) {
            shareMessengerButton.addEventListener('click', () => {
                // For Messenger, directly sharing a link is more reliable via web.
                // The fb-messenger://share URL scheme is primarily for native apps to trigger the share dialog with a link.
                // It might not reliably pre-fill text.
                // A common approach for web is to use Facebook's Send Dialog, but that requires a Facebook App ID
                // and SDK initialization, which is more complex.
                // Simplest for now is to share the page URL. Users can then add their own message.
                // Alternative: A direct link that opens Messenger with the URL.
                const messengerUrl = `fb-messenger://share?link=${encodeURIComponent(pageUrl)}`;
                // Fallback for desktop or if the deep link fails (though this is less common now)
                const desktopFallbackUrl = `https://www.facebook.com/dialog/send?app_id=YOUR_APP_ID_IF_YOU_HAVE_ONE&link=${encodeURIComponent(pageUrl)}&redirect_uri=${encodeURIComponent(pageUrl)}`;
                
                // Try to open the deep link
                window.open(messengerUrl, '_blank');

                // Note: Pre-filling text with fb-messenger://share is not consistently supported.
                // The most reliable way is to share the URL and let users type their message.
                // If you have a Facebook App ID, you could implement the Send Dialog for a more integrated experience.
                // For now, we'll stick to the simpler URL share which is widely supported.
                // console.log("Attempting to share on Messenger. If the app doesn't open, the link might be copied or a browser fallback attempted by the OS/Browser.");
            });
        }


        if (copyLinkButton) { copyLinkButton.addEventListener('click', () => { if (navigator.clipboard && navigator.clipboard.writeText) { navigator.clipboard.writeText(pageUrl).then(() => { if(copyNotification) { copyNotification.textContent = "Link Copied!"; copyNotification.style.backgroundColor = 'var(--copied-success-bg)'; copyNotification.classList.add('show'); setTimeout(() => { copyNotification.classList.remove('show'); }, 2000); } }).catch(err => { console.error('Failed to copy: ', err); try { const textArea = document.createElement("textarea"); textArea.value = pageUrl; textArea.style.position = "fixed"; textArea.style.left = "-9999px"; document.body.appendChild(textArea); textArea.focus(); textArea.select(); document.execCommand('copy'); document.body.removeChild(textArea); if(copyNotification) { copyNotification.textContent = "Link Copied!"; copyNotification.style.backgroundColor = 'var(--copied-success-bg)'; copyNotification.classList.add('show'); setTimeout(() => { copyNotification.classList.remove('show'); }, 2000); } } catch (e) { if(copyNotification) { copyNotification.textContent = "Copy Failed!"; copyNotification.style.backgroundColor = 'red'; copyNotification.classList.add('show'); setTimeout(() => { copyNotification.classList.remove('show'); }, 2000); } alert('Copy failed. Please copy manually.'); } }); } else { try { const textArea = document.createElement("textarea"); textArea.value = pageUrl; textArea.style.position = "fixed"; textArea.style.left = "-9999px"; document.body.appendChild(textArea); textArea.focus(); textArea.select(); document.execCommand('copy'); document.body.removeChild(textArea); if(copyNotification) { copyNotification.textContent = "Link Copied!"; copyNotification.style.backgroundColor = 'var(--copied-success-bg)'; copyNotification.classList.add('show'); setTimeout(() => { copyNotification.classList.remove('show'); }, 2000); } } catch (e) { if(copyNotification) { copyNotification.textContent = "Copy Failed!"; copyNotification.style.backgroundColor = 'red'; copyNotification.classList.add('show'); setTimeout(() => { copyNotification.classList.remove('show'); }, 2000); } alert('Copy failed. Please copy manually.'); } } }); }
        const currentYearElement = document.getElementById('currentYear'); if (currentYearElement) { currentYearElement.textContent = new Date().getFullYear(); }
    </script>

    <!-- Profitableratecpm Script -->
    <script type='text/javascript' src='//www.profitableratecpm.com/amq0defw?key=fb2e925eb54fd6d8fd27672dd5aa711b'></script>
</body>
</html>
